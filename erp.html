<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Trust Bank - Complete ERP System</title>
    <style>
        /* Global Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e9ecef;
            color: #333;
            line-height: 1.6;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Login/Signup Page Styles */
        .form-container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .center-flex {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        
        .logo {
            margin-bottom: 20px;
        }
        
        h2 {
            color: #343a40;
            margin-bottom: 5px;
        }
        
        .tagline {
            color: #6c757d;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            box-sizing: border-box;
        }
        
        .form-group input:focus {
            border-color: #005A9C;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 90, 156, 0.25);
        }
        
        .form-options {
            text-align: right;
            margin-bottom: 20px;
        }
        
        .form-options a {
            color: #005A9C;
            text-decoration: none;
            font-size: 14px;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 5px;
            background-color: #005A9C;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .btn:hover {
            background-color: #004170;
        }
        
        .footer-text {
            margin-top: 25px;
            color: #6c757d;
        }
        
        .footer-text a {
            color: #005A9C;
            font-weight: bold;
            text-decoration: none;
        }
        
        /* ERP System Styles */
        .erp-wrapper {
            display: flex;
            height: 100vh;
        }
        
        .erp-sidebar {
            background: #246ab0;
            color: #fff;
            width: 240px;
            min-width: 190px;
            padding-top: 16px;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 8px #e8e8e8;
        }
        
        .erp-menu {
            list-style: none;
            padding: 0 8px 0 10px;
            margin: 0;
        }
        
        .erp-menu li {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #2892ce;
            margin-bottom: 5px;
            border-radius: 4px;
            padding: 9px 9px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.99em;
            transition: background .2s;
            border-left: 3px solid #ffc300;
        }
        
        .erp-menu li:hover, .erp-menu li.active {
            background: #3bb2ec;
        }
        
        .erp-menu .menu-icon {
            width: 18px;
            height: 18px;
            display: inline-block;
            background: #fff3;
            border-radius: 4px;
        }
        
        .erp-sidebar h3 {
            margin: 12px 0 8px 12px;
            font-size: 1.13em;
            font-weight: 700;
        }
        
        .erp-account-list {
            flex: 1;
            overflow-y: auto;
            padding: 3px 8px 3px 18px;
            margin-bottom: 7px;
            border-top: 1.5px solid #9ae1fc;
        }
        
        .erp-account-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .erp-account-list li {
            background: #f7fcff;
            color: #157bb6;
            margin-bottom: 7px;
            border-radius: 5px;
            padding: 8px 13px;
            font-size: 0.97em;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid #9ae1fc;
            transition: background .2s;
        }
        
        .erp-account-list li:hover, .erp-account-list li.active {
            background: #d1f3fc;
        }
        
        .erp-sidebar .sidebar-btn {
            background: #fff6e5;
            color: #0a468e;
            border: none;
            margin: 11px 15px 7px 15px;
            border-radius: 5px;
            padding: 8px 0;
            font-weight: 700;
            cursor: pointer;
            font-size: 1em;
        }
        
        .erp-main-content {
            flex: 1;
            padding: 0;
            min-width: 0;
            overflow-y: auto;
        }
        
        .erp-header {
            display: flex;
            align-items: center;
            background: #2892ce;
            color: #fff;
            padding: 10px;
            gap: 8px;
        }
        
        .erp-header .tab, .erp-header .tab.main {
            background: #eee;
            border: none;
            padding: 10px 18px;
            font-weight: 700;
            color: #222;
            border-radius: 5px 5px 0 0;
            margin-right: 4px;
            cursor: pointer;
        }
        
        .erp-header .tab.main {
            background: #1fc4f6;
            color: #fff;
        }
        
        .erp-header .erp-btn {
            margin-left: auto;
            background: #fff;
            color: #2892ce;
            border: none;
            padding: 7px 20px;
            font-weight: 700;
            border-radius: 4px;
            margin-right: 6px;
            cursor: pointer;
        }
        
        .erp-header .erp-btn.close {
            background: #e55353;
            color: #fff;
        }
        
        .erp-form-container {
            max-width: 1060px;
            background: #fff;
            margin: 30px auto 0 auto;
            border-radius: 7px;
            box-shadow: 0 0 10px rgba(60,120,200,0.07);
            padding: 18px 20px 8px 22px;
        }
        
        .form-title {
            margin-bottom: 18px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #237fc2;
            letter-spacing: 1px;
        }
        
        .erp-form-flex {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
            margin-bottom: 14px;
        }
        
        .erp-form-left, .erp-form-right {
            flex: 1 1 420px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .erp-form label {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #444;
            font-size: 0.99rem;
            gap: 8px;
        }
        
        .erp-form input, .erp-form select {
            margin-left: 8px;
            padding: 6px 9px;
            border: 1px solid #aeeaff;
            border-radius: 4px;
            font-size: 1rem;
            background: #f9fcfe;
        }
        
        .erp-form input[type="checkbox"] {
            margin-left: 0;
        }
        
        .form-small-note {
            font-size: 0.8em;
            margin-left: 2px;
            color: #b44;
            margin-bottom: 4px;
        }
        
        .erp-form-footer {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 16px;
            margin-top: 12px;
        }
        
        .delete-btn {
            background: #e55353;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 8px 18px;
            font-size: 1rem;
            font-weight: 600;
            margin-right: 14px;
            cursor: pointer;
        }
        
        .save-btn {
            background: #1e69c7;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 8px 22px;
            font-size: 1rem;
            font-weight: 700;
            margin-left: auto;
            cursor: pointer;
        }
        
        /* Module Container */
        .module-container {
            max-width: 1024px;
            background: #fff;
            margin: 30px auto 0 auto;
            border-radius: 7px;
            box-shadow: 0 0 10px rgba(60,120,200,0.07);
            padding: 16px 26px 18px 26px;
        }
        
        .module-header {
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .module-header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .module-header-logo {
            width: 50px;
            height: 50px;
            background: #de4d4b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 900;
            font-size: 1.3em;
        }
        
        .module-header-title {
            font-size: 1.42em;
            font-weight: 800;
            letter-spacing: 1px;
            color: #246ab0;
        }
        
        .module-close-btn {
            background: #ff4e4e;
            color: #fff;
            font-weight: 900;
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            font-size: 1.3em;
            cursor: pointer;
        }
        
        /* Table Styles */
        .table-wrap {
            margin-top: 18px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: #f7fcff;
            font-size: 0.97em;
        }
        
        .data-table th, .data-table td {
            border: 1px solid #b7e5fb;
            padding: 6px 10px;
            text-align: left;
        }
        
        .data-table th {
            background: #e1f4fd;
            color: #246ab0;
            font-weight: 700;
        }
        
        .data-table tr:nth-child(even) {
            background: #f5fafd;
        }
        
        .table-footer {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-top: 18px;
        }
        
        .nav-btn {
            background: #f2f7fd;
            border: none;
            color: #246ab0;
            font-size: 1.15em;
            padding: 6px 13px;
            border-radius: 9px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .print-btn {
            background: #2892ce;
            color: #fff;
            border: none;
            font-weight: 700;
            border-radius: 7px;
            padding: 8px 24px;
            font-size: 1em;
            cursor: pointer;
        }
        
        .del-btn {
            background: #e55353;
            color: #fff;
            border: none;
            font-weight: 700;
            border-radius: 7px;
            padding: 8px 24px;
            font-size: 1em;
            cursor: pointer;
        }
        
        /* Form Row Styles */
        .form-row {
            display: flex;
            gap: 22px;
            margin-bottom: 12px;
            align-items: center;
        }
        
        .form-row label {
            font-weight: 600;
            color: #444;
            margin-right: 6px;
            min-width: 92px;
            text-align: right;
            display: inline-block;
        }
        
        .form-row input, .form-row select {
            padding: 7px 10px;
            font-size: 1em;
            border: 1px solid #aeeaff;
            border-radius: 4px;
            background: #f9fcfe;
        }
        
        .form-row select {
            min-width: 210px;
        }
        
        .form-entry {
            display: flex;
            gap: 8px;
            margin-bottom: 6px;
            align-items: center;
        }
        
        .form-entry input {
            min-width: 130px;
        }
        
        .form-entry .save-btn {
            background: #246ab0;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 8px 22px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            margin-left: 13px;
        }
        
        .form-entry input, .form-entry select {
            padding: 7px 8px;
        }
        
        /* POS Styles */
        .pos-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .pos-items {
            flex: 1;
            background: #f7fcff;
            border-radius: 7px;
            padding: 15px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .pos-cart {
            flex: 1;
            background: #f7fcff;
            border-radius: 7px;
            padding: 15px;
        }
        
        .pos-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #e1f4fd;
            cursor: pointer;
        }
        
        .pos-item:hover {
            background: #e1f4fd;
        }
        
        .pos-item-name {
            font-weight: 600;
        }
        
        .pos-item-price {
            color: #246ab0;
            font-weight: 700;
        }
        
        .pos-cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e1f4fd;
        }
        
        .pos-total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #246ab0;
            font-weight: 700;
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
        }
        
        /* Manual Invoice Styles */
        .invoice-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #246ab0;
        }
        
        .invoice-details {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .invoice-items {
            margin-top: 20px;
        }
        
        .invoice-totals {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }
        
        .invoice-total-row {
            display: flex;
            justify-content: space-between;
            width: 300px;
        }
        
        /* Report Styles */
        .report-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .report-summary {
            background: #f7fcff;
            padding: 15px;
            border-radius: 7px;
            margin-bottom: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-label {
            font-weight: 600;
        }
        
        .summary-value {
            font-weight: 700;
            color: #246ab0;
        }
        
        /* Outstanding Analysis Styles */
        .outstanding-cards {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .outstanding-card {
            flex: 1;
            background: #f7fcff;
            padding: 15px;
            border-radius: 7px;
            text-align: center;
        }
        
        .outstanding-amount {
            font-size: 1.5em;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .outstanding-positive {
            color: #28a745;
        }
        
        .outstanding-negative {
            color: #dc3545;
        }
        
        /* Bank Entry Styles */
        .bank-entry-wrapper {
            max-width: 1024px;
            background: #fff;
            margin: 30px auto 0 auto;
            border-radius: 7px;
            box-shadow: 0 0 10px rgba(60,120,200,0.07);
            padding: 16px 26px 18px 26px;
        }
        
        .bank-header {
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .bank-header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .bank-header-logo {
            width: 50px;
            height: 50px;
            background: #de4d4b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 900;
            font-size: 1.3em;
        }
        
        .bank-header-title {
            font-size: 1.42em;
            font-weight: 800;
            letter-spacing: 1px;
            color: #246ab0;
        }
        
        .bank-header-date {
            font-size: 1.1em;
            font-weight: 600;
            color: #182848;
        }
        
        .bank-header-balance {
            font-size: 0.96em;
            color: #d42a2a;
            margin-left: 12px;
        }
        
        .bank-close-btn {
            background: #ff4e4e;
            color: #fff;
            font-weight: 900;
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            font-size: 1.3em;
            cursor: pointer;
        }
        
        .bank-form-row {
            display: flex;
            gap: 22px;
            margin-bottom: 12px;
            align-items: center;
        }
        
        .bank-form-row label {
            font-weight: 600;
            color: #444;
            margin-right: 6px;
            min-width: 92px;
            text-align: right;
            display: inline-block;
        }
        
        .bank-form-row input, .bank-form-row select {
            padding: 7px 10px;
            font-size: 1em;
            border: 1px solid #aeeaff;
            border-radius: 4px;
            background: #f9fcfe;
        }
        
        .bank-form-row select {
            min-width: 210px;
        }
        
        .bank-form-entry {
            display: flex;
            gap: 8px;
            margin-bottom: 6px;
            align-items: center;
        }
        
        .bank-form-entry input {
            min-width: 130px;
        }
        
        .bank-form-entry .bank-save-btn {
            background: #246ab0;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 8px 22px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            margin-left: 13px;
        }
        
        .bank-form-entry input, .bank-form-entry select {
            padding: 7px 8px;
        }
        
        .bank-table-wrap {
            margin-top: 18px;
        }
        
        .bank-table {
            width: 100%;
            border-collapse: collapse;
            background: #f7fcff;
            font-size: 0.97em;
        }
        
        .bank-table th, .bank-table td {
            border: 1px solid #b7e5fb;
            padding: 6px 10px;
            text-align: left;
        }
        
        .bank-table th {
            background: #e1f4fd;
            color: #246ab0;
            font-weight: 700;
        }
        
        .bank-table tr:nth-child(even) {
            background: #f5fafd;
        }
        
        .bank-table-footer {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-top: 18px;
        }
        
        .bank-nav-btn {
            background: #f2f7fd;
            border: none;
            color: #246ab0;
            font-size: 1.15em;
            padding: 6px 13px;
            border-radius: 9px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .bank-print-btn {
            background: #2892ce;
            color: #fff;
            border: none;
            font-weight: 700;
            border-radius: 7px;
            padding: 8px 24px;
            font-size: 1em;
            cursor: pointer;
        }
        
        .bank-del-btn {
            background: #e55353;
            color: #fff;
            border: none;
            font-weight: 700;
            border-radius: 7px;
            padding: 8px 24px;
            font-size: 1em;
            cursor: pointer;
        }
        
        /* Log Book Styles */
        .logbook-wrapper {
            max-width: 1080px;
            background: #fff;
            margin: 30px auto 0 auto;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(60,120,200,0.08);
            padding: 16px 28px 18px 28px;
            display: flex;
            gap: 28px;
        }
        
        .logbook-side {
            width: 180px;
            min-width: 120px;
            background: #eaf4fa;
            border-radius: 8px;
            padding: 9px 0;
            display: flex;
            flex-direction: column;
            gap: 7px;
            box-shadow: 0 0 6px #c3e2fc33;
            margin-right: 8px;
        }
        
        .logbook-side-btn {
            background: #fff;
            border: none;
            border-radius: 7px;
            color: #246ab0;
            font-weight: 600;
            font-size: 1em;
            padding: 11px 16px;
            margin: 0 12px;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 1px 6px #e3e3e3cc;
            cursor: pointer;
            border-left: 6px solid #b4e6fe;
            transition: background .16s, color .16s;
        }
        
        .logbook-side-btn.active, .logbook-side-btn:hover {
            background: #c6eafe;
            color: #004466;
        }
        
        .logbook-main {
            flex: 1;
        }
        
        .logbook-header {
            display: flex;
            align-items: center;
            gap: 19px;
            margin-bottom: 11px;
            justify-content: space-between;
        }
        
        .logbook-title {
            font-size: 1.35em;
            font-weight: 700;
            color: #237fc2;
        }
        
        .logbook-params {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logbook-params select, .logbook-params input[type="date"] {
            padding: 6px 11px;
            border-radius: 5px;
            border: 1px solid #b4e6fe;
            background: #f7fbfe;
            font-size: 1em;
            margin-right: 4px;
        }
        
        .logbook-btn-ok {
            margin-left: 8px;
            font-weight: 700;
            background: #ffe472;
            border: none;
            border-radius: 7px;
            padding: 7px 19px;
            color: #246ab0;
            cursor: pointer;
        }
        
        .logbook-btn-print {
            margin-left: 10px;
            font-weight: 700;
            background: #2892ce;
            color: #fff;
            border: none;
            border-radius: 7px;
            padding: 8px 24px;
            font-size: 1em;
            cursor: pointer;
        }
        
        .logbook-btn-close {
            background: #ff4e4e;
            color: #fff;
            font-weight: 900;
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            font-size: 1.2em;
            cursor: pointer;
        }
        
        .logbook-table-wrap {
            margin-top: 10px;
        }
        
        .logbook-table {
            width: 100%;
            border-collapse: collapse;
            background: #f7fcff;
            font-size: 0.95em;
        }
        
        .logbook-table th, .logbook-table td {
            border: 1px solid #bee8fa;
            padding: 6px 13px;
            text-align: left;
        }
        
        .logbook-table th {
            background: #e1f4fd;
            color: #246ab0;
            font-weight: 700;
        }
        
        .logbook-table tr:nth-child(even) {
            background: #f5fafd;
        }
        
        .logbook-footer {
            display: flex;
            align-items: center;
            gap: 21px;
            margin-top: 18px;
            padding: 9px 10px;
            font-size: 1.1em;
            color: #246ab0;
            background: #f2fbff;
            border-radius: 7px;
        }
        
        .logbook-footer-summary {
            font-weight: 700;
            color: #d42a2a;
        }
        
        /* Responsive Styles */
        @media (max-width: 900px) {
            .pos-container {
                flex-direction: column;
            }
            
            .outstanding-cards {
                flex-direction: column;
            }
            
            .logbook-wrapper {
                flex-direction: column;
            }
            
            .logbook-side {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                padding: 9px;
            }
            
            .logbook-side-btn {
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Create Account Page -->
    <div class="center-flex" id="createAccountPage">
        <div class="form-container">
            <img src="https://placehold.co/150x50/005A9C/FFFFFF?text=GlobalTrust" alt="Bank Logo" class="logo">
            <h2>Create Your Secure Account</h2>
            <p class="tagline">Join millions who trust us with their finances.</p>

            <form id="signup-form">
                <div class="form-group">
                    <label for="fullname">Full Name</label>
                    <input type="text" id="fullname" name="fullname" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email Address</label>
                    <input type="email" id="signup-email" name="signup-email" placeholder="Enter a valid email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Create Password</label>
                    <input type="password" id="signup-password" name="signup-password" placeholder="Minimum 8 characters" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" name="confirm-password" placeholder="Re-enter your password" required>
                </div>
                <button type="submit" class="btn">Create Account</button>
            </form>

            <p class="footer-text">
                Already have an account? <a href="#" onclick="showPage('loginPage')">Login here</a>
            </p>
        </div>
    </div>

    <!-- Login Page -->
    <div class="center-flex hidden" id="loginPage">
        <div class="form-container">
            <img src="https://placehold.co/150x50/005A9C/FFFFFF?text=GlobalTrust" alt="Bank Logo" class="logo">
            <h2>Welcome Back</h2>
            <p class="tagline">Secure access to your financial world</p>

            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email Address</label>
                    <input type="email" id="login-email" name="login-email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" name="login-password" placeholder="Enter your password" required>
                </div>
                <div class="form-options">
                    <a href="#" onclick="showPage('forgotPage')">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>

            <p class="footer-text">
                Don't have an account? <a href="#" onclick="showPage('createAccountPage')">Create one here</a>
            </p>
        </div>
    </div>

    <!-- Forgot Password Page -->
    <div class="center-flex hidden" id="forgotPage">
        <div class="form-container">
            <img src="https://placehold.co/150x50/005A9C/FFFFFF?text=GlobalTrust" alt="Bank Logo" class="logo">
            <h2>Reset Your Password</h2>
            <p class="tagline">We'll send a reset link to your email</p>

            <form id="forgot-form">
                <div class="form-group">
                    <label for="forgot-email">Email Address</label>
                    <input type="email" id="forgot-email" name="forgot-email" placeholder="Enter your email" required>
                </div>
                <button type="submit" class="btn">Send Reset Link</button>
            </form>

            <p class="footer-text">
                Remember your password? <a href="#" onclick="showPage('loginPage')">Back to login</a>
            </p>
        </div>
    </div>

    <!-- ERP System -->
    <div class="erp-wrapper hidden" id="erpMain">
        <div class="erp-sidebar">
            <ul class="erp-menu">
                <li class="active" onclick="showModule('accountModule', this)"><span class="menu-icon"></span>Account [Ctrl + A]</li>
                <li onclick="showModule('itemsModule', this)"><span class="menu-icon"></span>Items [Ctrl + I]</li>
                <li onclick="showModule('salesModule', this)"><span class="menu-icon"></span>Sale [Ctrl + S]</li>
                <li onclick="showModule('purchaseModule', this)"><span class="menu-icon"></span>Purchase [Ctrl + P]</li>
                <li onclick="showModule('quickPaymentModule', this)"><span class="menu-icon"></span>Quick Payment [J5]</li>
                <li onclick="showModule('quickReceiptModule', this)"><span class="menu-icon"></span>Quick Receipt [F6]</li>
                <li onclick="showModule('bankEntryModule', this)"><span class="menu-icon"></span>Bank Entry [Ctrl + N]</li>
                <li onclick="showModule('posModule', this)"><span class="menu-icon"></span>POS [Ctrl + Q]</li>
                <li onclick="showModule('manualInvoiceModule', this)"><span class="menu-icon"></span>Manual Invoice [Ctrl + M]</li>
                <li onclick="showModule('salesRegisterModule', this)"><span class="menu-icon"></span>Sale Register</li>
                <li onclick="showModule('billWiseProfitModule', this)"><span class="menu-icon"></span>Bill Wise Profit</li>
                <li onclick="showModule('purchaseRegisterModule', this)"><span class="menu-icon"></span>Purchase Register</li>
                <li onclick="showModule('logBookModule', this)"><span class="menu-icon"></span>Log Book [Ctrl + L]</li>
                <li onclick="showModule('cashBookModule', this)"><span class="menu-icon"></span>Cash Book [Ctrl + B]</li>
                <li onclick="showModule('dayBookModule', this)"><span class="menu-icon"></span>Day Book [Ctrl + D]</li>
                <li onclick="showModule('outstandingAnalysisModule', this)"><span class="menu-icon"></span>Outstanding Analysis</li>
            </ul>
            <h3>Account List (Saved)</h3>
            <div class="erp-account-list">
                <ul id="accountList"></ul>
            </div>
            <button class="sidebar-btn" onclick="focusCreateAccountForm()">+ Create Account</button>
        </div>
        <div class="erp-main-content">
            <!-- ACCOUNT MODULE -->
            <div id="accountModule">
                <div class="erp-header">
                    <button class="tab active">ADDRESS BOOK</button>
                    <button class="tab active main">CREATE ACCOUNT</button>
                    <button class="erp-btn list-accounts" onclick="showAccountList()">List of Accounts</button>
                    <button class="erp-btn close" onclick="logout()">Logout</button>
                </div>
                <div class="erp-form-container">
                    <form id="createAccountForm" class="erp-form" autocomplete="off">
                        <div class="form-title">CREATE ACCOUNT</div>
                        <div class="erp-form-flex">
                            <div class="erp-form-left">
                                <label>Account Name <input type="text" name="accountName" required></label>
                                <label>Print Name <input type="text" name="printName"></label>
                                <label>Group <input type="text" name="group"></label>
                                <label>Op. Bal.
                                    <input type="text" name="opBal" style="width: 60px;">
                                    <select name="opType">
                                        <option>Dr.</option>
                                        <option>Cr.</option>
                                    </select>
                                </label>
                                <div class="form-small-note">Dr. = Receivable, Cr. = Payable</div>
                                <label>Address <input type="text" name="address"></label>
                                <label>Address2 <input type="text" name="address2"></label>
                                <label>
                                    City <input type="text" name="city" style="width: 90px;">
                                    State <input type="text" name="state" style="width: 80px;">
                                    State Code <input type="text" name="stateCode" style="width: 40px;">
                                </label>
                                <label>
                                    Phone <input type="text" name="phone" style="width: 120px;" maxlength="10">
                                </label>
                                <label>Email <input type="email" name="email"></label>
                                <label>Contact Person <input type="text" name="contactPerson"></label>
                                <label>
                                    Birthday On <input type="date" name="birthday" style="width: 130px;">
                                </label>
                                <label>
                                    Bank Name <input type="text" name="bankName" style="width: 180px;">
                                    Bank Account No. <input type="text" name="bankAccountNo" style="width: 180px;" maxlength="12">
                                </label>
                            </div>
                            <div class="erp-form-right">
                                <label>
                                    Party Type
                                    <select name="partyType">
                                        <option>N.A.</option>
                                        <option>Customer</option>
                                        <option>Supplier</option>
                                    </select>
                                </label>
                                <label>VAT No. <input type="text" name="vatNo"></label>
                                <label>U.Card No. <input type="text" name="uCardNo"></label>
                                <label>PAN No. / PIN <input type="text" name="pan"></label>
                                <label>Adhar Card No. <input type="text" name="aadhaar"></label>
                                <label>DL No. 1 <input type="text" name="dl1"></label>
                                <label>DL No. 2 <input type="text" name="dl2"></label>
                                <label>
                                    <input type="checkbox" name="billBalance"> Maintain Bill-By-Bill Balance
                                </label>
                                <label>
                                    Credit Limit <input type="text" name="creditLimit" style="width: 80px;">
                                    Bill Limit <input type="text" name="billLimit" style="width: 80px;">
                                </label>
                                <label>
                                    Credit Days for Sale <input type="text" name="creditDaysSale" style="width: 80px;">
                                    Credit Days for Purchase <input type="text" name="creditDaysPurchase" style="width: 80px;">
                                </label>
                                <label>Audit Upto <input type="date" name="auditUpto"></label>
                            </div>
                        </div>
                        <div class="erp-form-footer">
                            <button type="button" class="delete-btn" onclick="deleteForm()">Delete</button>
                            <input type="text" name="chequeName" placeholder="Cheque Printing Name" style="width: 260px;">
                            <button type="submit" class="save-btn">Save</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- ITEMS MODULE -->
            <div class="hidden" id="itemsModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>📦</span></div>
                            <div class="module-header-title">ITEMS MANAGEMENT</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <form id="itemsForm" class="form-entry" autocomplete="off">
                        <label>Item Name</label>
                        <input type="text" id="itemName" required>
                        <input type="text" id="itemCode" placeholder="Item Code">
                        <input type="text" id="itemCategory" placeholder="Category">
                        <input type="number" id="itemPrice" placeholder="Price" min="0" required>
                        <input type="number" id="itemStock" placeholder="Stock Qty" min="0" required>
                        <input type="text" id="itemUnit" placeholder="Unit">
                        <button type="submit" class="save-btn">Add Item</button>
                    </form>
                    <div class="table-wrap">
                        <table class="data-table" id="itemsTable">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Item Code</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <button class="nav-btn">&lt;&lt;</button>
                        <button class="nav-btn">&lt;</button>
                        <button class="nav-btn">&gt;</button>
                        <button class="nav-btn">&gt;&gt;</button>
                        <button class="print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="del-btn" onclick="deleteItems()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- SALES MODULE -->
            <div class="hidden" id="salesModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>💰</span></div>
                            <div class="module-header-title">SALES MANAGEMENT</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <form id="salesForm" class="form-entry" autocomplete="off">
                        <label>Customer</label>
                        <select id="salesCustomer" required>
                            <option value="">Select Customer</option>
                        </select>
                        <input type="date" id="salesDate" required>
                        <input type="text" id="salesItem" placeholder="Item" required>
                        <input type="number" id="salesQty" placeholder="Qty" min="1" required>
                        <input type="number" id="salesPrice" placeholder="Price" min="0" required>
                        <button type="submit" class="save-btn">Add Sale</button>
                    </form>
                    <div class="table-wrap">
                        <table class="data-table" id="salesTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Item</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <button class="nav-btn">&lt;&lt;</button>
                        <button class="nav-btn">&lt;</button>
                        <button class="nav-btn">&gt;</button>
                        <button class="nav-btn">&gt;&gt;</button>
                        <button class="print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="del-btn" onclick="deleteSales()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- PURCHASE MODULE -->
            <div class="hidden" id="purchaseModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>🛒</span></div>
                            <div class="module-header-title">PURCHASE MANAGEMENT</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <form id="purchaseForm" class="form-entry" autocomplete="off">
                        <label>Supplier</label>
                        <select id="purchaseSupplier" required>
                            <option value="">Select Supplier</option>
                        </select>
                        <input type="date" id="purchaseDate" required>
                        <input type="text" id="purchaseItem" placeholder="Item" required>
                        <input type="number" id="purchaseQty" placeholder="Qty" min="1" required>
                        <input type="number" id="purchasePrice" placeholder="Price" min="0" required>
                        <button type="submit" class="save-btn">Add Purchase</button>
                    </form>
                    <div class="table-wrap">
                        <table class="data-table" id="purchaseTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Supplier</th>
                                    <th>Item</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <button class="nav-btn">&lt;&lt;</button>
                        <button class="nav-btn">&lt;</button>
                        <button class="nav-btn">&gt;</button>
                        <button class="nav-btn">&gt;&gt;</button>
                        <button class="print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="del-btn" onclick="deletePurchases()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- QUICK PAYMENT MODULE -->
            <div class="hidden" id="quickPaymentModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>💸</span></div>
                            <div class="module-header-title">QUICK PAYMENT</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <form id="quickPaymentForm" class="form-entry" autocomplete="off">
                        <label>Pay To</label>
                        <select id="paymentTo" required>
                            <option value="">Select Payee</option>
                        </select>
                        <input type="date" id="paymentDate" required>
                        <input type="number" id="paymentAmount" placeholder="Amount" min="0" required>
                        <input type="text" id="paymentMethod" placeholder="Payment Method">
                        <input type="text" id="paymentRef" placeholder="Reference">
                        <button type="submit" class="save-btn">Make Payment</button>
                    </form>
                    <div class="table-wrap">
                        <table class="data-table" id="paymentTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Pay To</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Reference</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <button class="nav-btn">&lt;&lt;</button>
                        <button class="nav-btn">&lt;</button>
                        <button class="nav-btn">&gt;</button>
                        <button class="nav-btn">&gt;&gt;</button>
                        <button class="print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="del-btn" onclick="deletePayments()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- QUICK RECEIPT MODULE -->
            <div class="hidden" id="quickReceiptModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>🧾</span></div>
                            <div class="module-header-title">QUICK RECEIPT</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <form id="quickReceiptForm" class="form-entry" autocomplete="off">
                        <label>Received From</label>
                        <select id="receiptFrom" required>
                            <option value="">Select Payer</option>
                        </select>
                        <input type="date" id="receiptDate" required>
                        <input type="number" id="receiptAmount" placeholder="Amount" min="0" required>
                        <input type="text" id="receiptMethod" placeholder="Payment Method">
                        <input type="text" id="receiptRef" placeholder="Reference">
                        <button type="submit" class="save-btn">Record Receipt</button>
                    </form>
                    <div class="table-wrap">
                        <table class="data-table" id="receiptTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Received From</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Reference</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <button class="nav-btn">&lt;&lt;</button>
                        <button class="nav-btn">&lt;</button>
                        <button class="nav-btn">&gt;</button>
                        <button class="nav-btn">&gt;&gt;</button>
                        <button class="print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="del-btn" onclick="deleteReceipts()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- BANK ENTRY MODULE -->
            <div class="hidden" id="bankEntryModule">
                <div class="bank-entry-wrapper">
                    <div class="bank-header">
                        <div class="bank-header-left">
                            <div class="bank-header-logo"><span>🟠</span></div>
                            <div>
                                <div class="bank-header-title">BANK ENTRY</div>
                                <div class="bank-header-date">
                                    Date
                                    <input type="date" id="bankDate" value="2025-10-18">
                                    <span class="bank-header-balance">(Bal. = 3,00,00,000.00 Dr.)</span>
                                </div>
                            </div>
                        </div>
                        <button class="bank-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    <div class="bank-form-row">
                        <label for="bankSelect">Select Bank</label>
                        <select id="bankSelect">
                            <option value="icici-current">Icici Bank Current Account</option>
                            <option value="icici-limit">Icici Bank Limit O/d Account</option>
                        </select>
                        <span style="margin-left:18px;">Entry</span>
                        <input type="text" id="bankEntryInput" style="flex:1;">
                    </div>
                    <form id="bankTransForm" class="bank-form-entry" autocomplete="off">
                        <label>Party Name</label>
                        <input type="text" id="partyName" required>
                        <input type="number" id="chequeNo" placeholder="Chq No." min="0">
                        <input type="date" id="chequeDate" placeholder="Chq Date">
                        <input type="number" id="amountField" placeholder="Amount" min="0" required>
                        <input type="text" id="expField" placeholder="Exp." style="width:70px">
                        <input type="number" id="totalAmt" placeholder="Total Amt." min="0" required>
                        <input type="text" id="remarksField" placeholder="Remarks">
                        <button type="submit" class="bank-save-btn">Save</button>
                    </form>
                    <div class="bank-table-wrap">
                        <table class="bank-table" id="bankTransTable">
                            <thead>
                                <tr>
                                    <th>Party Name</th>
                                    <th>Chq No.</th>
                                    <th>Chq Dt.</th>
                                    <th>Amount</th>
                                    <th>Exp.</th>
                                    <th>Total Amt.</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="bank-table-footer">
                        <button class="bank-nav-btn">&lt;&lt;</button>
                        <button class="bank-nav-btn">&lt;</button>
                        <button class="bank-nav-btn">&gt;</button>
                        <button class="bank-nav-btn">&gt;&gt;</button>
                        <button class="bank-print-btn" onclick="alert('Print (demo only)')">Print</button>
                        <button class="bank-del-btn" onclick="deleteRows()">Delete</button>
                    </div>
                </div>
            </div>

            <!-- POS MODULE -->
            <div class="hidden" id="posModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>🖥️</span></div>
                            <div class="module-header-title">POINT OF SALE (POS)</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="pos-container">
                        <div class="pos-items">
                            <h3>Available Items</h3>
                            <div id="posItemsList">
                                <!-- Items will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="pos-cart">
                            <h3>Shopping Cart</h3>
                            <div id="posCart">
                                <!-- Cart items will be populated by JavaScript -->
                            </div>
                            <div class="pos-total">
                                <span>Total:</span>
                                <span id="posTotalAmount">₹0.00</span>
                            </div>
                            <div style="margin-top: 15px; display: flex; gap: 10px;">
                                <button class="save-btn" onclick="processPOSPayment()">Process Payment</button>
                                <button class="del-btn" onclick="clearPOSCart()">Clear Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MANUAL INVOICE MODULE -->
            <div class="hidden" id="manualInvoiceModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>🧾</span></div>
                            <div class="module-header-title">MANUAL INVOICE</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="invoice-header">
                        <div>
                            <h3>Global Trust Bank</h3>
                            <p>123 Business Street, Financial District</p>
                            <p>Phone: +1 234 567 8900</p>
                        </div>
                        <div class="invoice-details">
                            <div class="form-row">
                                <label>Invoice No:</label>
                                <input type="text" id="invoiceNo" value="INV-2025-001">
                            </div>
                            <div class="form-row">
                                <label>Date:</label>
                                <input type="date" id="invoiceDate" value="2025-10-18">
                            </div>
                            <div class="form-row">
                                <label>Customer:</label>
                                <select id="invoiceCustomer">
                                    <option value="">Select Customer</option>
                                        
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="invoice-items">
                        <table class="data-table" id="invoiceItemsTable">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Description</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Amount</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="invoiceItemsBody">
                                <tr>
                                    <td><input type="text" class="invoice-item" placeholder="Item"></td>
                                    <td><input type="text" class="invoice-desc" placeholder="Description"></td>
                                    <td><input type="number" class="invoice-qty" placeholder="Qty" min="1" value="1"></td>
                                    <td><input type="number" class="invoice-price" placeholder="Price" min="0" value="0"></td>
                                    <td><input type="number" class="invoice-amount" placeholder="Amount" min="0" readonly></td>
                                    <td><button type="button" class="del-btn" onclick="removeInvoiceRow(this)">Remove</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="save-btn" style="margin-top: 10px;" onclick="addInvoiceRow()">Add Item</button>
                    </div>
                    
                    <div class="invoice-totals">
                        <div class="invoice-total-row">
                            <span>Subtotal:</span>
                            <span id="invoiceSubtotal">₹0.00</span>
                        </div>
                        <div class="invoice-total-row">
                            <span>Tax (10%):</span>
                            <span id="invoiceTax">₹0.00</span>
                        </div>
                        <div class="invoice-total-row">
                            <span>Total:</span>
                            <span id="invoiceTotal">₹0.00</span>
                        </div>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="printInvoice()">Print Invoice</button>
                        <button class="save-btn" onclick="saveInvoice()">Save Invoice</button>
                    </div>
                </div>
            </div>

            <!-- SALES REGISTER MODULE -->
            <div class="hidden" id="salesRegisterModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>📊</span></div>
                            <div class="module-header-title">SALES REGISTER</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="report-filters">
                        <label>From Date:</label>
                        <input type="date" id="salesRegFromDate" value="2025-10-01">
                        <label>To Date:</label>
                        <input type="date" id="salesRegToDate" value="2025-10-18">
                        <button class="save-btn" onclick="generateSalesRegister()">Generate Report</button>
                    </div>
                    
                    <div class="report-summary">
                        <div class="summary-row">
                            <span class="summary-label">Total Sales:</span>
                            <span class="summary-value">₹45,670.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Number of Invoices:</span>
                            <span class="summary-value">24</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Average Sale Value:</span>
                            <span class="summary-value">₹1,902.92</span>
                        </div>
                    </div>
                    
                    <div class="table-wrap">
                        <table class="data-table" id="salesRegisterTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Invoice No</th>
                                    <th>Customer</th>
                                    <th>Amount</th>
                                    <th>Tax</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025-10-18</td>
                                    <td>INV-2025-024</td>
                                    <td>ABC Enterprises</td>
                                    <td>₹12,500.00</td>
                                    <td>₹1,250.00</td>
                                    <td>₹13,750.00</td>
                                </tr>
                                <tr>
                                    <td>2025-10-17</td>
                                    <td>INV-2025-023</td>
                                    <td>XYZ Corp</td>
                                    <td>₹8,900.00</td>
                                    <td>₹890.00</td>
                                    <td>₹9,790.00</td>
                                </tr>
                                <tr>
                                    <td>2025-10-16</td>
                                    <td>INV-2025-022</td>
                                    <td>Global Suppliers</td>
                                    <td>₹15,200.00</td>
                                    <td>₹1,520.00</td>
                                    <td>₹16,720.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="alert('Sales Register printed (demo only)')">Print Report</button>
                        <button class="save-btn" onclick="alert('Sales Register exported (demo only)')">Export to Excel</button>
                    </div>
                </div>
            </div>

            <!-- BILL WISE PROFIT MODULE -->
            <div class="hidden" id="billWiseProfitModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>💰</span></div>
                            <div class="module-header-title">BILL WISE PROFIT ANALYSIS</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="report-filters">
                        <label>From Date:</label>
                        <input type="date" id="profitFromDate" value="2025-10-01">
                        <label>To Date:</label>
                        <input type="date" id="profitToDate" value="2025-10-18">
                        <button class="save-btn" onclick="generateProfitReport()">Generate Report</button>
                    </div>
                    
                    <div class="report-summary">
                        <div class="summary-row">
                            <span class="summary-label">Total Revenue:</span>
                            <span class="summary-value">₹45,670.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Total Cost:</span>
                            <span class="summary-value">₹32,150.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Total Profit:</span>
                            <span class="summary-value">₹13,520.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Profit Margin:</span>
                            <span class="summary-value">29.6%</span>
                        </div>
                    </div>
                    
                    <div class="table-wrap">
                        <table class="data-table" id="profitTable">
                            <thead>
                                <tr>
                                    <th>Invoice No</th>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Revenue</th>
                                    <th>Cost</th>
                                    <th>Profit</th>
                                    <th>Margin %</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>INV-2025-024</td>
                                    <td>2025-10-18</td>
                                    <td>ABC Enterprises</td>
                                    <td>₹13,750.00</td>
                                    <td>₹9,625.00</td>
                                    <td>₹4,125.00</td>
                                    <td>30.0%</td>
                                </tr>
                                <tr>
                                    <td>INV-2025-023</td>
                                    <td>2025-10-17</td>
                                    <td>XYZ Corp</td>
                                    <td>₹9,790.00</td>
                                    <td>₹7,040.00</td>
                                    <td>₹2,750.00</td>
                                    <td>28.1%</td>
                                </tr>
                                <tr>
                                    <td>INV-2025-022</td>
                                    <td>2025-10-16</td>
                                    <td>Global Suppliers</td>
                                    <td>₹16,720.00</td>
                                    <td>₹11,370.00</td>
                                    <td>₹5,350.00</td>
                                    <td>32.0%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="alert('Profit Report printed (demo only)')">Print Report</button>
                        <button class="save-btn" onclick="alert('Profit Report exported (demo only)')">Export to Excel</button>
                    </div>
                </div>
            </div>

            <!-- PURCHASE REGISTER MODULE -->
            <div class="hidden" id="purchaseRegisterModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>📋</span></div>
                            <div class="module-header-title">PURCHASE REGISTER</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="report-filters">
                        <label>From Date:</label>
                        <input type="date" id="purchaseRegFromDate" value="2025-10-01">
                        <label>To Date:</label>
                        <input type="date" id="purchaseRegToDate" value="2025-10-18">
                        <button class="save-btn" onclick="generatePurchaseRegister()">Generate Report</button>
                    </div>
                    
                    <div class="report-summary">
                        <div class="summary-row">
                            <span class="summary-label">Total Purchases:</span>
                            <span class="summary-value">₹32,150.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Number of Bills:</span>
                            <span class="summary-value">18</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Average Purchase Value:</span>
                            <span class="summary-value">₹1,786.11</span>
                        </div>
                    </div>
                    
                    <div class="table-wrap">
                        <table class="data-table" id="purchaseRegisterTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Bill No</th>
                                    <th>Supplier</th>
                                    <th>Amount</th>
                                    <th>Tax</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025-10-15</td>
                                    <td>BIL-2025-018</td>
                                    <td>Material Suppliers Inc</td>
                                    <td>₹9,500.00</td>
                                    <td>₹950.00</td>
                                    <td>₹10,450.00</td>
                                </tr>
                                <tr>
                                    <td>2025-10-10</td>
                                    <td>BIL-2025-017</td>
                                    <td>Goods Wholesalers</td>
                                    <td>₹7,200.00</td>
                                    <td>₹720.00</td>
                                    <td>₹7,920.00</td>
                                </tr>
                                <tr>
                                    <td>2025-10-05</td>
                                    <td>BIL-2025-016</td>
                                    <td>Global Imports</td>
                                    <td>₹8,900.00</td>
                                    <td>₹890.00</td>
                                    <td>₹9,790.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="alert('Purchase Register printed (demo only)')">Print Report</button>
                        <button class="save-btn" onclick="alert('Purchase Register exported (demo only)')">Export to Excel</button>
                    </div>
                </div>
            </div>

            <!-- LOG BOOK MODULE -->
            <div class="hidden" id="logBookModule">
                <div class="logbook-wrapper">
                    <div class="logbook-side">
                        <button class="logbook-side-btn active">Ledger</button>
                        <button class="logbook-side-btn">Statement</button>
                        <button class="logbook-side-btn">I-Ledger</button>
                        <button class="logbook-side-btn">Handy Ledger</button>
                        <button class="logbook-side-btn">Bill Wise Log</button>
                        <button class="logbook-side-btn">Daily Balance</button>
                        <button class="logbook-side-btn">Monthly Summary</button>
                        <button class="logbook-side-btn">Interest</button>
                        <button class="logbook-side-btn">Nutshell</button>
                    </div>
                    <div class="logbook-main">
                        <div class="logbook-header">
                            <div><span class="logbook-title">LOG BOOK</span></div>
                            <div class="logbook-params">
                                <select>
                                    <option>Icici Bank Current Account</option>
                                    <option>Icici Bank Limit O/d Account</option>
                                </select>
                                <span>From</span>
                                <input type="date" id="logFromDt" value="2025-10-17">
                                <span>To</span>
                                <input type="date" id="logToDt" value="2025-10-18">
                                <button type="button" class="logbook-btn-ok" onclick="getLogBookData()">OK</button>
                                <button type="button" class="logbook-btn-print" onclick="alert('Print (demo only)')">Print</button>
                                <button type="button" class="logbook-btn-close" title="Close" onclick="showModule('accountModule', document.querySelector('.erp-menu li'));">✕</button>
                            </div>
                        </div>
                        <div class="logbook-table-wrap">
                            <table class="logbook-table" id="logBookTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Name</th>
                                        <th>Remarks</th>
                                        <th>Debit</th>
                                        <th>Credit</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="logbook-footer">
                            <span class="logbook-footer-summary">Opening Balance: 3,00,000.00 Dr.</span>
                            <span>Total Dr.: 0.00</span>
                            <span>Total Cr.: 50,000.00</span>
                            <span>Balance: 2,99,50,000.00 Dr.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CASH BOOK MODULE -->
            <div class="hidden" id="cashBookModule">
                <div class="logbook-wrapper">
                    <div class="logbook-side">
                        <button class="logbook-side-btn active">Ledger</button>
                        <button class="logbook-side-btn">Statement</button>
                        <button class="logbook-side-btn">Receipt</button>
                        <button class="logbook-side-btn">Payment</button>
                        <button class="logbook-side-btn">Daily Balance</button>
                        <button class="logbook-side-btn">Summary</button>
                    </div>
                    <div class="logbook-main">
                        <div class="logbook-header">
                            <div><span class="logbook-title" style="color:#237fc2;font-weight:900;">CASH BOOK</span></div>
                            <div class="logbook-params">
                                <select>
                                    <option>Icici Bank Current Account</option>
                                    <option>Icici Bank Limit O/d Account</option>
                                </select>
                                <span>From</span>
                                <input type="date" id="cashFromDt" value="2025-10-17">
                                <span>To</span>
                                <input type="date" id="cashToDt" value="2025-10-18">
                                <button type="button" class="logbook-btn-ok" onclick="getCashBookData()">OK</button>
                                <button type="button" class="logbook-btn-print" onclick="alert('Print (demo only)')">Print</button>
                                <button type="button" class="logbook-btn-close" title="Close" onclick="showModule('accountModule', document.querySelector('.erp-menu li'));">✕</button>
                            </div>
                        </div>
                        <div class="logbook-table-wrap" style="overflow-x:auto;">
                            <table class="logbook-table" id="cashBookTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Name</th>
                                        <th>Receipt</th>
                                        <th>Payment</th>
                                        <th>Balance</th>
                                        <th>Short Narration</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="logbook-footer">
                            <span class="logbook-footer-summary">Opening Bal.: 3,00,000.00 Dr.</span>
                            <span>Total Receipt: 0.00</span>
                            <span>Total Payment: 50,000.00</span>
                            <span>Balance: 2,99,50,000.00 Dr.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DAY BOOK MODULE -->
            <div class="hidden" id="dayBookModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>📅</span></div>
                            <div class="module-header-title">DAY BOOK</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="report-filters">
                        <label>Date:</label>
                        <input type="date" id="dayBookDate" value="2025-10-18">
                        <button class="save-btn" onclick="generateDayBook()">Generate Report</button>
                    </div>
                    
                    <div class="report-summary">
                        <div class="summary-row">
                            <span class="summary-label">Total Receipts:</span>
                            <span class="summary-value">₹25,670.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Total Payments:</span>
                            <span class="summary-value">₹18,420.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Net Cash Flow:</span>
                            <span class="summary-value">₹7,250.00</span>
                        </div>
                    </div>
                    
                    <div class="table-wrap">
                        <table class="data-table" id="dayBookTable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Type</th>
                                    <th>Particulars</th>
                                    <th>Voucher No</th>
                                    <th>Debit</th>
                                    <th>Credit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>09:15 AM</td>
                                    <td>Receipt</td>
                                    <td>Cash Sale</td>
                                    <td>RCP-2025-001</td>
                                    <td>₹5,000.00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>10:30 AM</td>
                                    <td>Payment</td>
                                    <td>Office Supplies</td>
                                    <td>PMT-2025-001</td>
                                    <td></td>
                                    <td>₹2,500.00</td>
                                </tr>
                                <tr>
                                    <td>02:15 PM</td>
                                    <td>Receipt</td>
                                    <td>Customer Payment</td>
                                    <td>RCP-2025-002</td>
                                    <td>₹12,500.00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>04:45 PM</td>
                                    <td>Payment</td>
                                    <td>Utility Bills</td>
                                    <td>PMT-2025-002</td>
                                    <td></td>
                                    <td>₹8,200.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="alert('Day Book printed (demo only)')">Print Report</button>
                        <button class="save-btn" onclick="alert('Day Book exported (demo only)')">Export to Excel</button>
                    </div>
                </div>
            </div>

            <!-- OUTSTANDING ANALYSIS MODULE -->
            <div class="hidden" id="outstandingAnalysisModule">
                <div class="module-container">
                    <div class="module-header">
                        <div class="module-header-left">
                            <div class="module-header-logo"><span>📈</span></div>
                            <div class="module-header-title">OUTSTANDING ANALYSIS</div>
                        </div>
                        <button class="module-close-btn" onclick="showModule('accountModule', document.querySelector('.erp-menu li'))">✕</button>
                    </div>
                    
                    <div class="outstanding-cards">
                        <div class="outstanding-card">
                            <h3>Total Receivables</h3>
                            <div class="outstanding-amount outstanding-positive">₹1,45,670.00</div>
                            <p>Amount due from customers</p>
                        </div>
                        <div class="outstanding-card">
                            <h3>Total Payables</h3>
                            <div class="outstanding-amount outstanding-negative">₹87,420.00</div>
                            <p>Amount due to suppliers</p>
                        </div>
                        <div class="outstanding-card">
                            <h3>Net Outstanding</h3>
                            <div class="outstanding-amount outstanding-positive">₹58,250.00</div>
                            <p>Net position</p>
                        </div>
                    </div>
                    
                    <div class="report-filters">
                        <label>As of Date:</label>
                        <input type="date" id="outstandingDate" value="2025-10-18">
                        <button class="save-btn" onclick="generateOutstandingAnalysis()">Refresh</button>
                    </div>
                    
                    <div class="table-wrap">
                        <h3>Receivables (Aging Analysis)</h3>
                        <table class="data-table" id="receivablesTable">
                            <thead>
                                <tr>
                                    <th>Customer</th>
                                    <th>Current</th>
                                    <th>1-30 Days</th>
                                    <th>31-60 Days</th>
                                    <th>61-90 Days</th>
                                    <th>>90 Days</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ABC Enterprises</td>
                                    <td>₹25,000.00</td>
                                    <td>₹12,500.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹37,500.00</td>
                                </tr>
                                <tr>
                                    <td>XYZ Corp</td>
                                    <td>₹18,750.00</td>
                                    <td>₹8,900.00</td>
                                    <td>₹5,200.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹32,850.00</td>
                                </tr>
                                <tr>
                                    <td>Global Suppliers</td>
                                    <td>₹42,300.00</td>
                                    <td>₹12,020.00</td>
                                    <td>₹8,000.00</td>
                                    <td>₹5,000.00</td>
                                    <td>₹10,000.00</td>
                                    <td>₹77,320.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-wrap" style="margin-top: 20px;">
                        <h3>Payables (Aging Analysis)</h3>
                        <table class="data-table" id="payablesTable">
                            <thead>
                                <tr>
                                    <th>Supplier</th>
                                    <th>Current</th>
                                    <th>1-30 Days</th>
                                    <th>31-60 Days</th>
                                    <th>61-90 Days</th>
                                    <th>>90 Days</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Material Suppliers Inc</td>
                                    <td>₹15,200.00</td>
                                    <td>₹8,500.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹23,700.00</td>
                                </tr>
                                <tr>
                                    <td>Goods Wholesalers</td>
                                    <td>₹12,800.00</td>
                                    <td>₹7,200.00</td>
                                    <td>₹5,500.00</td>
                                    <td>₹0.00</td>
                                    <td>₹0.00</td>
                                    <td>₹25,500.00</td>
                                </tr>
                                <tr>
                                    <td>Global Imports</td>
                                    <td>₹18,420.00</td>
                                    <td>₹9,800.00</td>
                                    <td>₹5,000.00</td>
                                    <td>₹5,000.00</td>
                                    <td>₹0.00</td>
                                    <td>₹38,220.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <button class="print-btn" onclick="alert('Outstanding Analysis printed (demo only)')">Print Report</button>
                        <button class="save-btn" onclick="alert('Outstanding Analysis exported (demo only)')">Export to Excel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Page Navigation
        function showPage(id) {
            ['createAccountPage', 'loginPage', 'forgotPage', 'erpMain'].forEach(x => {
                document.getElementById(x).classList.add('hidden');
            });
            document.getElementById(id).classList.remove('hidden');
        }

        // Module Navigation
        function showModule(module, li) {
            // Hide all modules
            const modules = [
                'accountModule', 'itemsModule', 'salesModule', 'purchaseModule', 
                'quickPaymentModule', 'quickReceiptModule', 'bankEntryModule',
                'posModule', 'manualInvoiceModule', 'salesRegisterModule',
                'billWiseProfitModule', 'purchaseRegisterModule', 'logBookModule',
                'cashBookModule', 'dayBookModule', 'outstandingAnalysisModule'
            ];
            modules.forEach(m => {
                if (document.getElementById(m)) {
                    document.getElementById(m).classList.add('hidden');
                }
            });
            
            // Show selected module
            if (module && document.getElementById(module)) {
                document.getElementById(module).classList.remove('hidden');
            }
            
            // Update active menu item
            let lis = document.querySelectorAll('.erp-menu li');
            lis.forEach(l => l.classList.remove('active'));
            if (li) li.classList.add('active');
            
            // Initialize module-specific data if needed
            if (module === 'posModule') {
                initializePOS();
            }
        }

        // User Management
        let users = JSON.parse(localStorage.getItem('bankUsers')) || [];
        let currentUser = null;

        // Create Account Form
        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const fullname = document.getElementById('fullname').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            // Validation
            if (password !== confirmPassword) {
                alert("Error: Passwords do not match!");
                return;
            }
            
            if (password.length < 8) {
                alert("Error: Password must be at least 8 characters long.");
                return;
            }
            
            // Check if user already exists
            if (users.some(user => user.email === email)) {
                alert("Error: An account with this email already exists.");
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now().toString(),
                fullname,
                email,
                password,
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('bankUsers', JSON.stringify(users));
            
            alert("Account created successfully! You can now login.");
            showPage('loginPage');
        });

        // Login Form
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert("Please enter a valid email address.");
                return;
            }
            
            // Find user
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                showPage('erpMain');
                showModule('accountModule', document.querySelector('.erp-menu li'));
                renderAccountList();
                populateDropdowns();
            } else {
                alert("Invalid email or password. Please try again.");
            }
        });

        // Forgot Password Form
        document.getElementById('forgot-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('forgot-email').value;
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert("Please enter a valid email address.");
                return;
            }
            
            // Check if user exists
            if (users.some(user => user.email === email)) {
                alert("Password reset link has been sent to your email. (This is a demo)");
                showPage('loginPage');
            } else {
                alert("No account found with this email address.");
            }
        });

        // Logout Function
        function logout() {
            currentUser = null;
            showPage('loginPage');
        }

        // Account Management
        const accounts = JSON.parse(localStorage.getItem('bankAccounts')) || [];
        const accountForm = document.getElementById('createAccountForm');
        const accountListEl = document.getElementById('accountList');

        function renderAccountList() {
            accountListEl.innerHTML = '';
            
            if (accounts.length === 0) {
                accountListEl.innerHTML = '<li style="color:#a8c5de;background:none;border:none;">No accounts yet.</li>';
                return;
            }
            
            accounts.forEach((acc, idx) => {
                const li = document.createElement('li');
                li.tabIndex = 0;
                li.title = "Click to view details";
                li.textContent = acc.accountName + (acc.group ? ' — ' + acc.group : '');
                li.onclick = () => alert('Account: ' + acc.accountName + '\nGroup: ' + (acc.group || '') + '\nParty Type: ' + (acc.partyType || ''));
                accountListEl.appendChild(li);
            });
        }

        accountForm.onsubmit = function(e) {
            e.preventDefault();
            if (!currentUser) return alert("Please login");
            
            const data = {};
            new FormData(accountForm).forEach((value, key) => {
                data[key] = value;
            });
            
            if (!data.accountName) return alert('Account Name required');
            
            accounts.push({
                id: Date.now().toString(),
                accountName: data.accountName,
                group: data.group,
                partyType: data.partyType,
                createdBy: currentUser.id,
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('bankAccounts', JSON.stringify(accounts));
            renderAccountList();
            populateDropdowns();
            
            alert('Account "' + data.accountName + '" saved successfully.');
            accountForm.reset();
            focusCreateAccountForm();
        };

        function focusCreateAccountForm() {
            if (document.getElementById('createAccountForm')) {
                document.getElementById('createAccountForm').querySelector('[name=accountName]').focus();
            }
        }

        function deleteForm() {
            if (confirm('Are you sure you want to clear this form?')) {
                accountForm.reset();
            }
        }

        function showAccountList() {
            document.querySelector('.erp-sidebar').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Populate dropdowns with accounts
        function populateDropdowns() {
            const customerSelect = document.getElementById('salesCustomer');
            const supplierSelect = document.getElementById('purchaseSupplier');
            const paymentToSelect = document.getElementById('paymentTo');
            const receiptFromSelect = document.getElementById('receiptFrom');
            const invoiceCustomerSelect = document.getElementById('invoiceCustomer');
            
            // Clear existing options (except the first one)
            [customerSelect, supplierSelect, paymentToSelect, receiptFromSelect, invoiceCustomerSelect].forEach(select => {
                if (select) {
                    while (select.options.length > 1) {
                        select.remove(1);
                    }
                }
            });
            
            // Add accounts to dropdowns
            accounts.forEach(account => {
                if (account.partyType === 'Customer' || !account.partyType) {
                    const option = document.createElement('option');
                    option.value = account.id;
                    option.textContent = account.accountName;
                    if (customerSelect) customerSelect.appendChild(option);
                    if (receiptFromSelect) receiptFromSelect.appendChild(option.cloneNode(true));
                    if (invoiceCustomerSelect) invoiceCustomerSelect.appendChild(option.cloneNode(true));
                }
                
                if (account.partyType === 'Supplier' || !account.partyType) {
                    const option = document.createElement('option');
                    option.value = account.id;
                    option.textContent = account.accountName;
                    if (supplierSelect) supplierSelect.appendChild(option);
                    if (paymentToSelect) paymentToSelect.appendChild(option.cloneNode(true));
                }
            });
        }

        // Items Management
        const items = JSON.parse(localStorage.getItem('bankItems')) || [];
        const itemsForm = document.getElementById('itemsForm');
        const itemsTable = document.getElementById('itemsTable').querySelector('tbody');

        function renderItemsTable() {
            itemsTable.innerHTML = '';
            items.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.code}</td>
                    <td>${item.category}</td>
                    <td>₹${item.price}</td>
                    <td>${item.stock}</td>
                    <td>${item.unit}</td>
                `;
                itemsTable.appendChild(tr);
            });
        }

        if (itemsForm) {
            itemsForm.onsubmit = function(e) {
                e.preventDefault();
                const name = document.getElementById('itemName').value;
                const code = document.getElementById('itemCode').value;
                const category = document.getElementById('itemCategory').value;
                const price = document.getElementById('itemPrice').value;
                const stock = document.getElementById('itemStock').value;
                const unit = document.getElementById('itemUnit').value;
                
                items.push({
                    id: Date.now().toString(),
                    name,
                    code,
                    category,
                    price,
                    stock,
                    unit,
                    createdBy: currentUser.id,
                    createdAt: new Date().toISOString()
                });
                
                localStorage.setItem('bankItems', JSON.stringify(items));
                renderItemsTable();
                itemsForm.reset();
            };
        }

        function deleteItems() {
            if (confirm('Delete all items?')) {
                items.length = 0;
                localStorage.setItem('bankItems', JSON.stringify(items));
                renderItemsTable();
            }
        }

        // Sales Management
        const sales = JSON.parse(localStorage.getItem('bankSales')) || [];
        const salesForm = document.getElementById('salesForm');
        const salesTable = document.getElementById('salesTable').querySelector('tbody');

        function renderSalesTable() {
            if (!salesTable) return;
            
            salesTable.innerHTML = '';
            sales.forEach(sale => {
                const customer = accounts.find(acc => acc.id === sale.customerId);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${sale.date}</td>
                    <td>${customer ? customer.accountName : 'Unknown'}</td>
                    <td>${sale.item}</td>
                    <td>${sale.qty}</td>
                    <td>₹${sale.price}</td>
                    <td>₹${sale.qty * sale.price}</td>
                `;
                salesTable.appendChild(tr);
            });
        }

        if (salesForm) {
            salesForm.onsubmit = function(e) {
                e.preventDefault();
                const customerId = document.getElementById('salesCustomer').value;
                const date = document.getElementById('salesDate').value;
                const item = document.getElementById('salesItem').value;
                const qty = document.getElementById('salesQty').value;
                const price = document.getElementById('salesPrice').value;
                
                sales.push({
                    id: Date.now().toString(),
                    customerId,
                    date,
                    item,
                    qty,
                    price,
                    createdBy: currentUser.id,
                    createdAt: new Date().toISOString()
                });
                
                localStorage.setItem('bankSales', JSON.stringify(sales));
                renderSalesTable();
                salesForm.reset();
            };
        }

        function deleteSales() {
            if (confirm('Delete all sales records?')) {
                sales.length = 0;
                localStorage.setItem('bankSales', JSON.stringify(sales));
                renderSalesTable();
            }
        }

        // Purchase Management
        const purchases = JSON.parse(localStorage.getItem('bankPurchases')) || [];
        const purchaseForm = document.getElementById('purchaseForm');
        const purchaseTable = document.getElementById('purchaseTable').querySelector('tbody');

        function renderPurchaseTable() {
            if (!purchaseTable) return;
            
            purchaseTable.innerHTML = '';
            purchases.forEach(purchase => {
                const supplier = accounts.find(acc => acc.id === purchase.supplierId);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${purchase.date}</td>
                    <td>${supplier ? supplier.accountName : 'Unknown'}</td>
                    <td>${purchase.item}</td>
                    <td>${purchase.qty}</td>
                    <td>₹${purchase.price}</td>
                    <td>₹${purchase.qty * purchase.price}</td>
                `;
                purchaseTable.appendChild(tr);
            });
        }

        if (purchaseForm) {
            purchaseForm.onsubmit = function(e) {
                e.preventDefault();
                const supplierId = document.getElementById('purchaseSupplier').value;
                const date = document.getElementById('purchaseDate').value;
                const item = document.getElementById('purchaseItem').value;
                const qty = document.getElementById('purchaseQty').value;
                const price = document.getElementById('purchasePrice').value;
                
                purchases.push({
                    id: Date.now().toString(),
                    supplierId,
                    date,
                    item,
                    qty,
                    price,
                    createdBy: currentUser.id,
                    createdAt: new Date().toISOString()
                });
                
                localStorage.setItem('bankPurchases', JSON.stringify(purchases));
                renderPurchaseTable();
                purchaseForm.reset();
            };
        }

        function deletePurchases() {
            if (confirm('Delete all purchase records?')) {
                purchases.length = 0;
                localStorage.setItem('bankPurchases', JSON.stringify(purchases));
                renderPurchaseTable();
            }
        }

        // Quick Payment Management
        const payments = JSON.parse(localStorage.getItem('bankPayments')) || [];
        const paymentForm = document.getElementById('quickPaymentForm');
        const paymentTable = document.getElementById('paymentTable').querySelector('tbody');

        function renderPaymentTable() {
            if (!paymentTable) return;
            
            paymentTable.innerHTML = '';
            payments.forEach(payment => {
                const payee = accounts.find(acc => acc.id === payment.payeeId);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${payment.date}</td>
                    <td>${payee ? payee.accountName : 'Unknown'}</td>
                    <td>₹${payment.amount}</td>
                    <td>${payment.method}</td>
                    <td>${payment.ref}</td>
                `;
                paymentTable.appendChild(tr);
            });
        }

        if (paymentForm) {
            paymentForm.onsubmit = function(e) {
                e.preventDefault();
                const payeeId = document.getElementById('paymentTo').value;
                const date = document.getElementById('paymentDate').value;
                const amount = document.getElementById('paymentAmount').value;
                const method = document.getElementById('paymentMethod').value;
                const ref = document.getElementById('paymentRef').value;
                
                payments.push({
                    id: Date.now().toString(),
                    payeeId,
                    date,
                    amount,
                    method,
                    ref,
                    createdBy: currentUser.id,
                    createdAt: new Date().toISOString()
                });
                
                localStorage.setItem('bankPayments', JSON.stringify(payments));
                renderPaymentTable();
                paymentForm.reset();
            };
        }

        function deletePayments() {
            if (confirm('Delete all payment records?')) {
                payments.length = 0;
                localStorage.setItem('bankPayments', JSON.stringify(payments));
                renderPaymentTable();
            }
        }

        // Quick Receipt Management
        const receipts = JSON.parse(localStorage.getItem('bankReceipts')) || [];
        const receiptForm = document.getElementById('quickReceiptForm');
        const receiptTable = document.getElementById('receiptTable').querySelector('tbody');

        function renderReceiptTable() {
            if (!receiptTable) return;
            
            receiptTable.innerHTML = '';
            receipts.forEach(receipt => {
                const payer = accounts.find(acc => acc.id === receipt.payerId);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${receipt.date}</td>
                    <td>${payer ? payer.accountName : 'Unknown'}</td>
                    <td>₹${receipt.amount}</td>
                    <td>${receipt.method}</td>
                    <td>${receipt.ref}</td>
                `;
                receiptTable.appendChild(tr);
            });
        }

        if (receiptForm) {
            receiptForm.onsubmit = function(e) {
                e.preventDefault();
                const payerId = document.getElementById('receiptFrom').value;
                const date = document.getElementById('receiptDate').value;
                const amount = document.getElementById('receiptAmount').value;
                const method = document.getElementById('receiptMethod').value;
                const ref = document.getElementById('receiptRef').value;
                
                receipts.push({
                    id: Date.now().toString(),
                    payerId,
                    date,
                    amount,
                    method,
                    ref,
                    createdBy: currentUser.id,
                    createdAt: new Date().toISOString()
                });
                
                localStorage.setItem('bankReceipts', JSON.stringify(receipts));
                renderReceiptTable();
                receiptForm.reset();
            };
        }

        function deleteReceipts() {
            if (confirm('Delete all receipt records?')) {
                receipts.length = 0;
                localStorage.setItem('bankReceipts', JSON.stringify(receipts));
                renderReceiptTable();
            }
        }

        // Bank Entry Management
        const bankTransactions = [];
        const transForm = document.getElementById('bankTransForm');
        const transTable = document.getElementById('bankTransTable').querySelector('tbody');

        function renderBankTable() {
            if (!transTable) return;
            
            transTable.innerHTML = '';
            bankTransactions.forEach((tx, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${tx.party}</td>
                    <td>${tx.chqNo}</td>
                    <td>${tx.chqDate}</td>
                    <td>₹${tx.amount}</td>
                    <td>${tx.exp}</td>
                    <td>₹${tx.total}</td>
                    <td>${tx.remarks}</td>
                `;
                transTable.appendChild(tr);
            });
        }

        if (transForm) {
            transForm.onsubmit = function(e) {
                e.preventDefault();
                const party = document.getElementById('partyName').value;
                const chqNo = document.getElementById('chequeNo').value;
                const chqDate = document.getElementById('chequeDate').value;
                const amount = document.getElementById('amountField').value;
                const exp = document.getElementById('expField').value;
                const total = document.getElementById('totalAmt').value;
                const remarks = document.getElementById('remarksField').value;
                bankTransactions.push({party, chqNo, chqDate, amount, exp, total, remarks});
                renderBankTable();
                transForm.reset();
                document.getElementById('partyName').focus();
            };
        }

        function deleteRows() {
            if (confirm('Delete all transactions?')) {
                bankTransactions.length = 0;
                renderBankTable();
            }
        }

        // POS Management
        let posCart = [];
        
        function initializePOS() {
            const posItemsList = document.getElementById('posItemsList');
            if (!posItemsList) return;
            
            posItemsList.innerHTML = '';
            
            // Add sample items if no items exist
            if (items.length === 0) {
                const sampleItems = [
                    { name: 'Laptop', price: 45000, stock: 10, unit: 'pcs' },
                    { name: 'Mouse', price: 500, stock: 50, unit: 'pcs' },
                    { name: 'Keyboard', price: 1200, stock: 30, unit: 'pcs' },
                    { name: 'Monitor', price: 15000, stock: 15, unit: 'pcs' },
                    { name: 'USB Cable', price: 200, stock: 100, unit: 'pcs' }
                ];
                
                sampleItems.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'pos-item';
                    itemDiv.innerHTML = `
                        <div class="pos-item-name">${item.name}</div>
                        <div class="pos-item-price">₹${item.price}</div>
                    `;
                    itemDiv.onclick = () => addToPOSCart(item);
                    posItemsList.appendChild(itemDiv);
                });
            } else {
                items.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'pos-item';
                    itemDiv.innerHTML = `
                        <div class="pos-item-name">${item.name}</div>
                        <div class="pos-item-price">₹${item.price}</div>
                    `;
                    itemDiv.onclick = () => addToPOSCart(item);
                    posItemsList.appendChild(itemDiv);
                });
            }
            
            updatePOSCart();
        }
        
        function addToPOSCart(item) {
            const existingItem = posCart.find(cartItem => cartItem.name === item.name);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                posCart.push({
                    name: item.name,
                    price: item.price,
                    quantity: 1
                });
            }
            
            updatePOSCart();
        }
        
        function updatePOSCart() {
            const posCartElement = document.getElementById('posCart');
            const posTotalAmount = document.getElementById('posTotalAmount');
            
            if (!posCartElement || !posTotalAmount) return;
            
            posCartElement.innerHTML = '';
            
            let total = 0;
            
            posCart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItemDiv = document.createElement('div');
                cartItemDiv.className = 'pos-cart-item';
                cartItemDiv.innerHTML = `
                    <div>${item.name} x ${item.quantity}</div>
                    <div>₹${itemTotal}</div>
                `;
                posCartElement.appendChild(cartItemDiv);
            });
            
            posTotalAmount.textContent = `₹${total.toFixed(2)}`;
        }
        
        function processPOSPayment() {
            if (posCart.length === 0) {
                alert('Cart is empty!');
                return;
            }
            
            const total = posCart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            alert(`Payment processed successfully!\nTotal Amount: ₹${total.toFixed(2)}`);
            clearPOSCart();
        }
        
        function clearPOSCart() {
            posCart = [];
            updatePOSCart();
        }

        // Manual Invoice Functions
        let invoiceItems = [];
        
        function addInvoiceRow() {
            const tbody = document.getElementById('invoiceItemsBody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" class="invoice-item" placeholder="Item"></td>
                <td><input type="text" class="invoice-desc" placeholder="Description"></td>
                <td><input type="number" class="invoice-qty" placeholder="Qty" min="1" value="1"></td>
                <td><input type="number" class="invoice-price" placeholder="Price" min="0" value="0"></td>
                <td><input type="number" class="invoice-amount" placeholder="Amount" min="0" readonly></td>
                <td><button type="button" class="del-btn" onclick="removeInvoiceRow(this)">Remove</button></td>
            `;
            tbody.appendChild(newRow);
            
            // Add event listeners to calculate amount automatically
            const qtyInput = newRow.querySelector('.invoice-qty');
            const priceInput = newRow.querySelector('.invoice-price');
            const amountInput = newRow.querySelector('.invoice-amount');
            
            qtyInput.addEventListener('input', calculateInvoiceAmount);
            priceInput.addEventListener('input', calculateInvoiceAmount);
            
            // Initialize calculation
            calculateInvoiceAmount();
        }
        
        function removeInvoiceRow(button) {
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
            calculateInvoiceAmount();
        }
        
        function calculateInvoiceAmount() {
            const rows = document.querySelectorAll('#invoiceItemsBody tr');
            let subtotal = 0;
            
            rows.forEach(row => {
                const qty = parseFloat(row.querySelector('.invoice-qty').value) || 0;
                const price = parseFloat(row.querySelector('.invoice-price').value) || 0;
                const amount = qty * price;
                
                row.querySelector('.invoice-amount').value = amount.toFixed(2);
                subtotal += amount;
            });
            
            const tax = subtotal * 0.1; // 10% tax
            const total = subtotal + tax;
            
            document.getElementById('invoiceSubtotal').textContent = `₹${subtotal.toFixed(2)}`;
            document.getElementById('invoiceTax').textContent = `₹${tax.toFixed(2)}`;
            document.getElementById('invoiceTotal').textContent = `₹${total.toFixed(2)}`;
        }
        
        function saveInvoice() {
            const invoiceNo = document.getElementById('invoiceNo').value;
            const invoiceDate = document.getElementById('invoiceDate').value;
            const customerId = document.getElementById('invoiceCustomer').value;
            
            if (!customerId) {
                alert('Please select a customer');
                return;
            }
            
            const customer = accounts.find(acc => acc.id === customerId);
            
            // Collect invoice items
            const invoiceItems = [];
            const rows = document.querySelectorAll('#invoiceItemsBody tr');
            
            rows.forEach(row => {
                const item = row.querySelector('.invoice-item').value;
                const description = row.querySelector('.invoice-desc').value;
                const qty = parseFloat(row.querySelector('.invoice-qty').value) || 0;
                const price = parseFloat(row.querySelector('.invoice-price').value) || 0;
                const amount = qty * price;
                
                if (item && qty > 0 && price > 0) {
                    invoiceItems.push({
                        item,
                        description,
                        qty,
                        price,
                        amount
                    });
                }
            });
            
            if (invoiceItems.length === 0) {
                alert('Please add at least one item to the invoice');
                return;
            }
            
            // Save invoice data (in a real app, this would be saved to a database)
            const invoice = {
                id: Date.now().toString(),
                invoiceNo,
                invoiceDate,
                customerId,
                customerName: customer ? customer.accountName : 'Unknown',
                items: invoiceItems,
                subtotal: parseFloat(document.getElementById('invoiceSubtotal').textContent.replace('₹', '')),
                tax: parseFloat(document.getElementById('invoiceTax').textContent.replace('₹', '')),
                total: parseFloat(document.getElementById('invoiceTotal').textContent.replace('₹', '')),
                createdBy: currentUser.id,
                createdAt: new Date().toISOString()
            };
            
            // Save to localStorage (for demo purposes)
            const invoices = JSON.parse(localStorage.getItem('bankInvoices')) || [];
            invoices.push(invoice);
            localStorage.setItem('bankInvoices', JSON.stringify(invoices));
            
            alert(`Invoice ${invoiceNo} saved successfully!`);
            
            // Reset form
            document.getElementById('invoiceItemsBody').innerHTML = `
                <tr>
                    <td><input type="text" class="invoice-item" placeholder="Item"></td>
                    <td><input type="text" class="invoice-desc" placeholder="Description"></td>
                    <td><input type="number" class="invoice-qty" placeholder="Qty" min="1" value="1"></td>
                    <td><input type="number" class="invoice-price" placeholder="Price" min="0" value="0"></td>
                    <td><input type="number" class="invoice-amount" placeholder="Amount" min="0" readonly></td>
                    <td><button type="button" class="del-btn" onclick="removeInvoiceRow(this)">Remove</button></td>
                </tr>
            `;
            
            // Re-attach event listeners
            document.querySelectorAll('.invoice-qty, .invoice-price').forEach(input => {
                input.addEventListener('input', calculateInvoiceAmount);
            });
            
            calculateInvoiceAmount();
        }
        
        function printInvoice() {
            alert('Invoice printed (demo only)');
        }

        // Report Generation Functions
        function generateSalesRegister() {
            alert('Sales Register generated for selected date range (demo only)');
        }
        
        function generateProfitReport() {
            alert('Profit Report generated for selected date range (demo only)');
        }
        
        function generatePurchaseRegister() {
            alert('Purchase Register generated for selected date range (demo only)');
        }
        
        function generateDayBook() {
            alert('Day Book generated for selected date (demo only)');
        }
        
        function generateOutstandingAnalysis() {
            alert('Outstanding Analysis updated for selected date (demo only)');
        }

        // Log Book Demo Data
        function getLogBookData() {
            const tbody = document.getElementById('logBookTable').querySelector('tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            // Demo: 1 log row
            const demoRow = document.createElement('tr');
            demoRow.innerHTML = `
                <td>27-07-2017</td>
                <td>Chq Issd</td>
                <td>Johny Enterprises</td>
                <td>Chq No. 126547; Dated: 28-07-2017</td>
                <td></td>
                <td>50,000.00</td>
                <td>2,99,50,000.00</td>
            `;
            tbody.appendChild(demoRow);
        }
        
        // Cash Book Demo Data
        function getCashBookData(){
            const tbody = document.getElementById('cashBookTable').querySelector('tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            const demoRow = document.createElement('tr');
            demoRow.innerHTML = `
                <td>27-07-2017</td>
                <td>Chq Issd</td>
                <td>Johny Enterprises</td>
                <td></td>
                <td>50,000.00</td>
                <td>2,99,50,000.00</td>
                <td>Chq No. 126547 / Towards Payment Adjustment</td>
            `;
            tbody.appendChild(demoRow);
        }

        // Keyboard Shortcuts
        window.addEventListener('keydown', (e) => {
            if (document.getElementById('erpMain').classList.contains('hidden')) return;
            
            if (e.ctrlKey) {
                e.preventDefault();
                switch(e.key) {
                    case 'a':
                    case 'A':
                        showModule('accountModule', document.querySelector('.erp-menu li'));
                        focusCreateAccountForm();
                        break;
                    case 'i':
                    case 'I':
                        showModule('itemsModule', document.querySelectorAll('.erp-menu li')[1]);
                        break;
                    case 's':
                    case 'S':
                        showModule('salesModule', document.querySelectorAll('.erp-menu li')[2]);
                        break;
                    case 'p':
                    case 'P':
                        showModule('purchaseModule', document.querySelectorAll('.erp-menu li')[3]);
                        break;
                    case 'n':
                    case 'N':
                        showModule('bankEntryModule', document.querySelectorAll('.erp-menu li')[6]);
                        break;
                    case 'q':
                    case 'Q':
                        showModule('posModule', document.querySelectorAll('.erp-menu li')[7]);
                        break;
                    case 'm':
                    case 'M':
                        showModule('manualInvoiceModule', document.querySelectorAll('.erp-menu li')[8]);
                        break;
                    case 'l':
                    case 'L':
                        showModule('logBookModule', document.querySelectorAll('.erp-menu li')[12]);
                        break;
                    case 'b':
                    case 'B':
                        showModule('cashBookModule', document.querySelectorAll('.erp-menu li')[13]);
                        break;
                    case 'd':
                    case 'D':
                        showModule('dayBookModule', document.querySelectorAll('.erp-menu li')[14]);
                        break;
                }
            }
        });

        // Initialize
        function initializeApp() {
            renderAccountList();
            renderItemsTable();
            renderSalesTable();
            renderPurchaseTable();
            renderPaymentTable();
            renderReceiptTable();
            renderBankTable();
            populateDropdowns();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = [
                'salesDate', 'purchaseDate', 'paymentDate', 'receiptDate',
                'salesRegFromDate', 'salesRegToDate', 'profitFromDate', 'profitToDate',
                'purchaseRegFromDate', 'purchaseRegToDate', 'dayBookDate', 'outstandingDate'
            ];
            
            dateInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.value = today;
            });
            
            // Initialize demo data for reports
            getLogBookData();
            getCashBookData();
            
            // Initialize manual invoice calculation
            calculateInvoiceAmount();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            showPage('createAccountPage');
        });

        // Add this function to populate customer dropdowns with brand names
function populateCustomerDropdownsWithBrands() {
    const customerSelect = document.getElementById('salesCustomer');
    const receiptFromSelect = document.getElementById('receiptFrom');
    const invoiceCustomerSelect = document.getElementById('invoiceCustomer');
    
    // Brand names for demonstration
    const brands = [
        "Apple Inc.",
        "Samsung Electronics",
        "Microsoft Corporation",
        "Google LLC",
        "Amazon.com Inc.",
        "Sony Corporation",
        "LG Electronics",
        "Dell Technologies",
        "HP Inc.",
        "Lenovo Group",
        "Intel Corporation",
        "IBM Corporation",
        "Cisco Systems",
        "Oracle Corporation",
        "Adobe Inc.",
        "NVIDIA Corporation",
        "Tesla Inc.",
        "Toyota Motor Corporation",
        "Honda Motor Co.",
        "Ford Motor Company",
        "BMW Group",
        "Mercedes-Benz",
        "Nike Inc.",
        "Adidas AG",
        "Coca-Cola Company",
        "PepsiCo Inc.",
        "Procter & Gamble",
        "Unilever PLC",
        "Nestlé S.A.",
        "McDonald's Corporation"
    ];
    
    // Clear existing options (except the first one)
    [customerSelect, receiptFromSelect, invoiceCustomerSelect].forEach(select => {
        if (select) {
            while (select.options.length > 1) {
                select.remove(1);
            }
        }
    });
    
    // Add brand names to dropdowns
    brands.forEach((brand, index) => {
        const option = document.createElement('option');
        option.value = `brand_${index}`;
        option.textContent = brand;
        
        if (customerSelect) customerSelect.appendChild(option.cloneNode(true));
        if (receiptFromSelect) receiptFromSelect.appendChild(option.cloneNode(true));
        if (invoiceCustomerSelect) invoiceCustomerSelect.appendChild(option.cloneNode(true));
    });
    
    // Also add existing accounts to maintain functionality
    accounts.forEach(account => {
        if (account.partyType === 'Customer' || !account.partyType) {
            const option = document.createElement('option');
            option.value = account.id;
            option.textContent = account.accountName;
            if (customerSelect) customerSelect.appendChild(option);
            if (receiptFromSelect) receiptFromSelect.appendChild(option.cloneNode(true));
            if (invoiceCustomerSelect) invoiceCustomerSelect.appendChild(option.cloneNode(true));
        }
    });
}

// Update the existing populateDropdowns function to include brands
function populateDropdowns() {
    const customerSelect = document.getElementById('salesCustomer');
    const supplierSelect = document.getElementById('purchaseSupplier');
    const paymentToSelect = document.getElementById('paymentTo');
    const receiptFromSelect = document.getElementById('receiptFrom');
    const invoiceCustomerSelect = document.getElementById('invoiceCustomer');
    
    // Clear existing options (except the first one)
    [customerSelect, supplierSelect, paymentToSelect, receiptFromSelect, invoiceCustomerSelect].forEach(select => {
        if (select) {
            while (select.options.length > 1) {
                select.remove(1);
            }
        }
    });
    
    // Populate customer dropdowns with brand names
    populateCustomerDropdownsWithBrands();
    
    // Add accounts to supplier and payment dropdowns
    accounts.forEach(account => {
        if (account.partyType === 'Supplier' || !account.partyType) {
            const option = document.createElement('option');
            option.value = account.id;
            option.textContent = account.accountName;
            if (supplierSelect) supplierSelect.appendChild(option);
            if (paymentToSelect) paymentToSelect.appendChild(option.cloneNode(true));
        }
    });
}

// Add this function to enhance dropdown appearance with brand icons
function enhanceDropdownAppearance() {
    // Add CSS for brand styling
    const style = document.createElement('style');
    style.textContent = `
        .brand-option {
            padding-left: 30px;
            position: relative;
        }
        .brand-option::before {
            content: "🏢";
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
        }
        .customer-dropdown {
            min-width: 250px;
        }
    `;
    document.head.appendChild(style);
    
    // Apply classes to customer dropdowns
    const customerDropdowns = [
        document.getElementById('salesCustomer'),
        document.getElementById('receiptFrom'),
        document.getElementById('invoiceCustomer')
    ];
    
    customerDropdowns.forEach(dropdown => {
        if (dropdown) {
            dropdown.classList.add('customer-dropdown');
        }
    });
}

// Update the initializeApp function to call the enhancement
function initializeApp() {
    renderAccountList();
    renderItemsTable();
    renderSalesTable();
    renderPurchaseTable();
    renderPaymentTable();
    renderReceiptTable();
    renderBankTable();
    populateDropdowns();
    enhanceDropdownAppearance(); // Add this line
    
    // Set default dates
    const today = new Date().toISOString().split('T')[0];
    const dateInputs = [
        'salesDate', 'purchaseDate', 'paymentDate', 'receiptDate',
        'salesRegFromDate', 'salesRegToDate', 'profitFromDate', 'profitToDate',
        'purchaseRegFromDate', 'purchaseRegToDate', 'dayBookDate', 'outstandingDate'
    ];
    
    dateInputs.forEach(id => {
        const element = document.getElementById(id);
        if (element) element.value = today;
    });
    
    // Initialize demo data for reports
    getLogBookData();
    getCashBookData();
    
    // Initialize manual invoice calculation
    calculateInvoiceAmount();
}
    </script>
</body>
</html>